nested scope tests for optimizations
